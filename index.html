<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, user-scalable=no">
<title>ã‚¬ãƒ©ã‚¬ãƒ©ç¦å¼•ãï½œiPad è½‰æŠŠæ‰‹ç‰ˆï¼ˆé˜²æ»‘å‹•ï¼‰</title>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<style>
  :root{
    --bg:#f6f7fb;
    --ink:#101418;
    --sub:#66707a;
    --card:#fff;
    --shadow:0 10px 30px rgba(0,0,0,.10);
    --radius:22px;
  }
  *{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
  html,body{height:100%}
  body{
    margin:0;
    font-family: ui-sans-serif, system-ui, -apple-system, "Noto Sans TC", "Segoe UI", Roboto;
    background: radial-gradient(1200px 800px at 70% -10%, #fff, var(--bg));
    color:var(--ink);
    overscroll-behavior: none;
  }
  body.lock{overflow:hidden;position:relative;}
  .wrap{max-width:1320px;margin:0 auto;padding:22px; padding-bottom: max(22px, env(safe-area-inset-bottom));}
  header{display:flex;align-items:center;gap:16px;margin-bottom:12px}
  h1{font-size: clamp(18px, 2.6vw, 28px);margin:0}
  .sub{color:var(--sub);margin:2px 0 0 0;font-size:14px}
  main{display:grid;grid-template-columns: 1.15fr .85fr;gap:22px}
  @media (max-width: 1024px){
    main{grid-template-columns: 1fr;gap:14px}
  }
  .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:18px}
  .stage{display:grid;grid-template-rows:auto 1fr auto;gap:18px;min-height:520px}
  .machine{position:relative;height:min(56vh,560px);display:grid;place-items:center;overflow:hidden;touch-action:none;}
  .drum{width:min(520px,92%);aspect-ratio:1/1}
  .hex{transform-origin:50% 50%}
  .spin .hex{animation:roll 1.6s cubic-bezier(.2,.7,.2,1) forwards}
  @keyframes roll{0%{transform:rotate(0)}100%{transform:rotate(720deg)}}
  .crank{transform-origin:165px 99px}
  .crank.grabbing #knob{filter:brightness(1.2)}
  .ball-slot{position:absolute;bottom:34px;left:50%;transform:translateX(-50%);display:flex;align-items:center;gap:12px}
  .ball{width:72px;height:72px;border-radius:50%;border:3px solid #1112;background:#e5e7eb;
        box-shadow:inset 0 8px 12px rgba(255,255,255,.7),inset 0 -10px 14px rgba(0,0,0,.15),0 10px 16px rgba(0,0,0,.08);
        display:grid;place-items:center;font-weight:800;color:#111c;transform:translateY(90px);opacity:0}
  .ball.show{animation:pop .5s ease-out forwards}
  @keyframes pop{0%{transform:translateY(90px) scale(.9);opacity:0}60%{transform:translateY(-6px) scale(1.04);opacity:1}100%{transform:translateY(0) scale(1);opacity:1}}
  .label{font-size:22px;font-weight:800;letter-spacing:.08em;padding:10px 16px;border-radius:14px;background:#111;color:#fff;
         box-shadow:0 8px 18px rgba(0,0,0,.18);min-width:112px;text-align:center}
  .controls{display:flex;flex-wrap:wrap;gap:12px;align-items:center;justify-content:center}
  button{appearance:none;border:0;cursor:pointer;padding:16px 22px;border-radius:16px;font-weight:800;background:#111;color:#fff;
          transition:transform .04s ease;min-height:56px;font-size:18px}
  button:active{transform:translateY(1px)}
  .btn-ghost{background:#e5e7eb;color:#111}
  .btn-success{background:#16a34a}
  .odds{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin-top:10px}
  .odds .row{display:flex;align-items:center;gap:10px;background:#f3f4f6;border-radius:14px;padding:12px 14px;font-size:18px}
  .chip{width:22px;height:22px;border-radius:50%;border:2px solid #1113;box-shadow:inset 0 3px 5px rgba(255,255,255,.7),
        inset 0 -3px 5px rgba(0,0,0,.2);flex:0 0 22px}
  .chip.white{background:#fafafa}.chip.blue{background:#3b82f6}.chip.red{background:#ef4444}.chip.yellow{background:#fbbf24}
  input[type="number"]{width:100%;padding:12px 12px;border:1px solid #e5e7eb;border-radius:12px;background:#fff;font-size:18px}
  .stats{display:grid;gap:12px}
  .statgrid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
  .pill{display:grid;gap:8px;justify-items:center;padding:14px;border-radius:16px;background:#f3f4f6}
  .pill .count{font-size:28px;font-weight:900}
  #crankHit{cursor:grab;touch-action:none;}
  .grabbing #crankHit{cursor:grabbing}
</style>
</head>
<body>
<div class="wrap">
<header><h1>ã‚¬ãƒ©ã‚¬ãƒ©ç¦å¼•ãï½œiPad è½‰æŠŠæ‰‹ç‰ˆï¼ˆé˜²æ»‘å‹•ï¼‰</h1><p class="sub">è½‰æŠŠæ‰‹ä¸€åœˆå‡ºçƒï¼Œä¸å†è§¸ç™¼é é¢æ»‘å‹•ã€‚</p></header>

<main>
<section class="card stage">
<div class="machine" id="machine">
<svg class="drum" viewBox="0 0 200 200">
  <g class="hex" id="hex">
    <polygon points="100,35 145,55 165,100 145,145 100,165 55,145 35,100 55,55" fill="#f59e0b" stroke="#8b5a11" stroke-width="2"/>
    <circle cx="100" cy="100" r="7" fill="#1f2937"/>
  </g>
  <g class="crank" id="crank">
    <rect x="122" y="96" width="38" height="6" rx="3" fill="#374151"/>
    <circle id="knob" cx="165" cy="99" r="7" fill="#111"/>
    <circle id="crankHit" cx="165" cy="99" r="18" fill="transparent"/>
  </g>
</svg>
<div class="ball-slot"><div class="ball" id="ball"><span id="ballText">ï¼Ÿ</span></div><div class="label" id="label">æŠ“ä½æŠŠæ‰‹è½‰å‹•</div></div>
</div>

<div class="controls">
<button id="rollBtn">ğŸ² æŠ½ä¸€æ¬¡</button>
<button class="btn-ghost" id="copyBtn">è¤‡è£½</button>
<button class="btn-success" id="resetBtn">é‡ç½®</button>
</div>
</section>
</main>
</div>

<script>
(function(){
const machine=document.getElementById('machine');
const crankHit=document.getElementById('crankHit');
const crank=document.getElementById('crank');
const hex=document.getElementById('hex');
const label=document.getElementById('label');
let dragging=false,lastAngle=0,accumDeg=0;
const TRIGGER=360;
function getCenter(el){const r=el.getBoundingClientRect();return{x:r.left+r.width/2,y:r.top+r.height/2}}
function angle(c,x,y){return Math.atan2(y-c.y,x-c.x)}
function deg(r){return r*180/Math.PI}
function norm(d){while(d>180)d-=360;while(d<-180)d+=360;return d}
function start(x,y){dragging=true;accumDeg=0;const c=getCenter(crankHit);crank.dataset.cx=c.x;crank.dataset.cy=c.y;lastAngle=angle(c,x,y);crank.classList.add('grabbing');document.body.classList.add('lock')}
function move(x,y){if(!dragging)return;const c={x:parseFloat(crank.dataset.cx),y:parseFloat(crank.dataset.cy)};let d=deg(angle(c,x,y)-lastAngle);d=norm(d);lastAngle=angle(c,x,y);accumDeg+=d;crank.style.transform=`rotate(${Math.max(-30,Math.min(30,accumDeg%60))}deg)`;hex.style.transform=`rotate(${(accumDeg*0.5)%360}deg)`;label.textContent=`è½‰å‹•ä¸­ ${Math.floor(Math.abs(accumDeg))}Â°`;if(Math.abs(accumDeg)>=TRIGGER){end();label.textContent='ä¸­çï¼';}}
function end(){if(!dragging)return;dragging=false;crank.classList.remove('grabbing');document.body.classList.remove('lock');crank.style.transform='rotate(0deg)';hex.style.transform='rotate(0deg)';if(Math.abs(accumDeg)<TRIGGER){label.textContent='å†å¤šè½‰ä¸€é»';setTimeout(()=>label.textContent='æŠ“ä½æŠŠæ‰‹è½‰å‹•',900)}}
crankHit.addEventListener('touchstart',e=>{e.preventDefault();const t=e.touches[0];start(t.clientX,t.clientY)},{passive:false});
window.addEventListener('touchmove',e=>{if(!dragging)return;e.preventDefault();const t=e.touches[0];move(t.clientX,t.clientY)},{passive:false});
window.addEventListener('touchend',e=>{if(dragging){e.preventDefault();end()}} ,{passive:false});
})();
</script>
</body>
</html>
